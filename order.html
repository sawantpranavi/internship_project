<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Orders</title>
    <link rel="stylesheet" href="frontend/src/css/styles.css">
    <style>
        .orders {
            padding: 20px;
            background-color: white;
            margin: 20px auto;
            width: 80%;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .orders h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .orders table {
            width: 100%;
            border-collapse: collapse;
        }

        .orders th,
        .orders td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .orders th {
            background-color: #f2f2f2;
        }

        .status-complete {
            background-color: #28a745;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
        }

        .status-pending {
            background-color: #ffc107;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        .header {
            background-color: #00396F;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .header img {
            height: 50px;
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        .header-right a {
            color: white;
            margin-left: 20px;
            text-decoration: none;
        }

        .search-bar {
            display: flex;
            justify-content: center;
            padding: 20px 0;
            background-color: white;
        }

        .search-bar input[type="text"] {
            width: 60%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .search-bar button {
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
        }

        .navbar {
            background-color: #19b59b;
            padding: 10px;
        }

        .navbar a {
            color: white;
            margin: 0 15px;
            text-decoration: none;
        }

        .orders {
            padding: 20px;
            background-color: white;
            margin: 20px auto;
            width: 80%;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .orders h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .orders table {
            width: 100%;
            border-collapse: collapse;
        }

        .orders th,
        .orders td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .orders th {
            background-color: #f2f2f2;
        }

        .status-complete {
            background-color: #28a745;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="">
        <h1>Welcome to iManage</h1>
        <br>
        <div>
            <ul class="menu">
                <li>
                    <a href="#">Categories</a>
                    <ul class="dropdown">
                        <li><a href="categories/computer/comp.html">Computers and Laptops - A</a></li>
                        <li><a href="categories/printer/printers.html">Printers - B</a></li>
                        <li><a href="categories/scanner/scanners.html">Scanners - C</a></li>
                        <li><a href="categories/plotters/plotters.html">Plotters - D</a></li>
                        <li><a href="categories/ups/ups.html">UPS Online Offline - E</a></li>
                        <li><a href="categories/xerox/xerox.html">Photocopiers, Xerox Machines - F</a></li>
                        <li><a href="categories/mobilitydevices/mobility.html">Mobility Devices - G</a></li>
                        <li><a href="categories/videodevices/videounits.html">Video Conferencing Devices - H</a></li>
                        <li><a href="categories/displayunits/displayunits.html">Display Units - I</a></li>
                        <li><a href="categories/miscellaneous/miscellaneous.html">Miscellaneous - J</a></li>
                        <li><a href="categories/biometric/biometrics.html">Biometrics Attendance Device - K</a></li>
                        <li><a href="categories/antivirus/antivirus.html">Anti Virus - L</a></li>
                    </ul>
                </li>
                <li><a href="#">Explore Shop</a></li>
                <li>
                    <a href="#">Services</a>
                    <ul class="dropdown">
                        <li><a href="#">New Procurement</a></li>
                        <li><a href="#">AMC Request</a></li>
                        <li><a href="#">View Tickets</a></li>
                    </ul>
                </li>
                <li><a href="contactus/contact.html">Contact Us</a></li>
            </ul>
        </div>
        <div class="orders">
            <h2>My Orders</h2>
            <table id="ordersTable">
                <tr>
                    <th>#</th>
                    <th>Order Number</th>
                    <th>Date & Time</th>
                    <th>Status</th>
                </tr>
            </table>
        </div>
    </div>
    <footer>
        <div id="copyright">
            <p>Â© 2024
                <a style="text-decoration: none;color: #fff;padding: 0 10px;" href="https://infotech.goa.gov.in/"
                    target="_blank">Info Tech Corporation of Goa Ltd.</a>
                - All Rights Reserved.
            </p>
        </div>
    </footer>
</body>
<script>
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const response = await fetch('http://localhost:3000/api/imanage/orders', {
                method: 'GET',
            });
            const result = await response.json();

            // Populate the table with order data
            const ordersTable = document.getElementById('ordersTable');

            result.orders.forEach((order, index) => {
                const row = ordersTable.insertRow(-1); // Add a new row

                // Insert cells and fill them with data
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);
                const cell3 = row.insertCell(2);
                const cell4 = row.insertCell(3);

                cell1.innerHTML = index + 1;
                cell2.innerHTML = order.orderNumber;
                cell3.innerHTML = new Date(order.dateTime).toLocaleString();
                
                const statusDiv = document.createElement('div');
                statusDiv.innerHTML = order.status;
                statusDiv.classList.add(order.status === 'Complete' ? 'status-complete' : 'status-pending');
                cell4.appendChild(statusDiv);
            });
        } catch (error) {
            console.error('Error:', error);
            alert('There was a problem loading the orders.');
        }
    });
</script>

</html>